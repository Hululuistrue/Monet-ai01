好的，遵照您的要求，这是一个完整、干净、无注释的最终版PRD文档。

---

# **AI 图片生成网站 PRD (V2.1 最终版)**

## **一、基础信息**

1. **项目目标**  
   * 核心用途：为个人用户提供高质量、易于使用的 AI 图片生成服务。  
   * 目标用户：普通用户、视频制作者、设计师、内容创作者。  
2. **用户画像与核心场景 (User Personas & Core Scenarios)**  
   * **普通用户 (小明)**: 追求好玩、有趣，希望快速将想法变为图片，用于社交分享。**核心需求**：简单的操作、有趣的提示词模板。  
   * **内容创作者 (小红)**: 需要为社交媒体帖子、博客文章制作独特且抓人眼球的配图。**核心需求**：风格多样化、一键分享、批量生成以供筛选。  
   * **设计师 (大伟)**: 寻求灵感或快速生成设计素材，对图片质量和可控性有更高要求。**核心需求**：高级参数控制（尺寸、风格、种子值）、图片版权清晰。  
3. **技术栈与部署**  
   * 前端：Next.js 14 \+ React 18 \+ TypeScript \+ Tailwind CSS  
   * 后端：Vercel Serverless Functions  
   * 数据库：Supabase (PostgreSQL \+ Auth)  
   * 图片存储：Cloudinary  
   * AI模型：Gemini 2.5 Flash Image Preview  
   * 图片规格：最大 1024×1024 像素  
   * 生成成本：~$0.039/张（1290 tokens）  
   * 部署：Vercel

---

## **二、功能需求**

### **2.1 核心功能**

* **图片生成**：用户输入提示词，调用 Gemini API 生成图片。  
* **提示词优化**：  
  * **初期实现**：提供一个高质量、分类清晰的静态提示词模板库（如：科幻、二次元、写实风格），帮助用户快速上手。  
  * **未来版本**：探索集成AI模型根据用户简单输入自动丰富和优化提示词。  
* **图片预览**：生成后立即展示，支持放大查看。  
* **图片下载**：支持多种格式 (PNG, JPG, WebP)。

### **2.2 用户系统**

* **游客模式**：每日 3 次免费生成，每小时最多 2 次（基于 IP \+ Cookie 限制）。一次只能生成 1 张图片供选择，只能支持生成普通质量的图片.
* **登录判断**：在landing page页面，点击Pricing 中的任意Plan，页面先判断是否时游客还是已登录用户，如果时游客，则跳转到http://domainname/auth/login 页面进行登录或注册
* **注册登录**：邮箱注册，支持第三方登录 (Google、GitHub、Apple、微信)。  
* **用户面板**：查看生成历史、剩余额度、账户设置。  
* **收藏功能**：保存喜欢的图片到个人收藏夹。  
* **举报功能**：用户可对违规图片进行举报。

### **2.3 增值功能**

* **图像生成**：注册用户中的Free Plan的用户，每日 10 次免费生成，每小时 2 次。注册用户中的Basic Plan用户，每小时生成10次图片，每天累计50次图片，支持生成高清图片。注册用户中的Pro Plan用户，每小时生成20次图片，每天200次图片，支持生成高清图片。  
* **批量生成**：注册用户一次生成 2-4 张图片供选择。  
* **高级参数**：图片尺寸、风格、质量控制。  
* **分享功能**：一键分享至社交媒体（Twitter/小红书/微信）。

---

## **三、安全与合规**

1. **内容安全**  
   * 集成内容过滤 API（Google Safe Search \+ 自建敏感词库）。  
   * 关键词黑名单过滤。  
   * 用户举报机制 \+ 管理后台人工审核。  
   * 举报处理 SLA：24小时内处理并反馈。  
2. **访问控制**  
   * IP \+ Cookie 多维度限流（设备指纹作为后续反滥用升级选项）。  
   * 游客每小时 2 次（每日累计 3 次）。注册用户中的Free Plan的用户，每日 10 次免费生成，每小时 2 次。注册用户中的Basic Plan用户，每小时生成5次图片，每天累计50次图片，支持生成高清图片。注册用户中的Pro Plan用户，每小时生成20次图片，每天200次图片，支持生成高清图片。  
   * API 调用监控和异常检测。  
   * 防刷机制：在用户进行高风险操作（如短时频繁注册、登录失败次数过多）时，触发验证码进行人机验证。  
3. **数据保护**  
   * 用户数据加密存储。  
   * 图片清理策略：  
     * **默认清理**：对于用户未收藏的图片，在生成 10 天后，系统将自动清理其高清原图，仅保留用于历史记录展示的缩略图。  
     * **收藏豁免**：用户收藏夹中的图片，其高清原图将被永久保留。  
   * 用户可导出与注销账号（GDPR 要求）。  
   * 遵循 GDPR。  
4. **法律合规**  
   * **服务条款与隐私政策**：V1.0 上线前，必须制定并上线《用户服务协议》和《隐私政策》。  
   * **核心条款**：协议需明确版权归属、平台授权许可及用户内容责任。

---

## **四、非功能需求**

1. **性能指标**  
   * 图片生成响应时间：小图 (512x512) ≤ 6 秒，大图 (1024x1024) ≤ 10 秒。  
   * 页面加载时间：≤ 2 秒。  
   * 支持并发：初期 20-30 用户。  
   * 采用 CDN 加速图片加载。  
   * 图片生成成本：~$0.039/张（游客每日最多 $0.117）。  
2. **成本控制与服务可用性策略**  
   * **核心目标**：在项目初期尽可能利用免费资源，同时建立监控和降级机制，保证核心服务的可用性。  
   * **服务状态与降级预案**：  
     * **正常 (资源用量 \< 80%)**：所有功能正常运行。  
     * **警告 (任一资源用量 \> 80%)**：系统自动向管理员发送告警。  
     * **降级 (任一资源用量 \= 100%)**：根据耗尽的资源（如存储、带宽、API调用次数）暂停部分非核心功能（如免费用户的图片生成），并向用户提供清晰提示。  
   * **API 成本备选方案**：将接入其他模型（如 Stable Diffusion）作为长期降本增效的探索方向。  
3. **监控与告警**  
   * **资源监控**：建立 Dashboard 监控核心资源的消耗情况。  
   * **性能监控**：监控 API 平均响应时间、图片生成成功率。  
   * **异常告警**：当资源用量超过阈值、API 错误率飙升或响应时间超标时，向开发团队发送告警。

---

## **五、开发计划与优先级**

### **5.1 MVP 版本（1-2周）**

* **目标**：基础可用的图片生成功能。  
* **功能列表**：  
  * 简单的图片生成界面  
  * Gemini API 集成  
  * 基础的 UI/UX 设计  
  * 游客模式限流  
  * 图片下载功能

### **5.2 V1.0 版本（3-4周）**

* **目标**：完整的用户系统和基础运营能力。  
* **功能列表**：  
  * 用户注册登录  
  * Supabase 数据库集成  
  * 生成历史记录  
  * 内容安全过滤  
  * 举报功能  
  * 基础的管理后台（利用 Supabase UI）  
  * 上线《用户服务协议》与《隐私政策》

### **5.3 V1.1 版本（5-6周）**

* **目标**：增值功能和优化。  
* **功能列表**：  
  * 批量生成功能  
  * 高级参数设置  
  * 收藏和分享功能  
  * 性能优化（CDN 缓存 \+ 并发提升）  
  * 成本监控和异常分析

---

## **六、API 设计**

1. **核心接口**  
   POST /api/generate      \- 生成图片  
   ```json
   // 请求参数
   {
     "prompt": "string",           // 提示词，必填
     "size": "1024x1024",         // 图片尺寸，可选：512x512, 1024x1024
     "style": "natural",          // 风格，可选：natural, vivid
     "quality": "standard",       // 质量，可选：standard, hd
     "n": 1                       // 生成数量，1-4张
   }
   
   // 响应格式
   {
     "success": true,
     "data": {
       "images": [
         {
           "id": "string",
           "url": "string",
           "thumbnail": "string",
           "size": "1024x1024",
           "created_at": "timestamp"
         }
       ],
       "usage": {
         "tokens": 1290,
         "cost": 0.039
       }
     }
   }
   ```
   
   GET  /api/history      \- 获取历史记录  
   POST /api/auth/register  \- 用户注册  
   POST /api/auth/login    \- 用户登录  
   GET  /api/credits      \- 获取剩余额度  
   POST /api/favorites     \- 添加收藏  
   GET  /api/favorites     \- 获取收藏列表  
   DELETE /api/images/:id  \- 删除图片  
   POST /api/report        \- 举报违规内容

   *注：各接口需明确权限控制（如删除操作需要用户所有权或管理员权限）。*  
2. **错误处理**  
   * 40001: 提示词包含敏感内容  
   * 40002: 超出每日生成限制  
   * 40003: 用户未登录  
   * 40004: 支付失败或订阅无效  
   * 50001: Gemini API 调用失败  
   * 50002: 图片存储失败  
   * 50003: 举报处理失败

---

## **七、运营与扩展**

1. **扩展规划**  
   * **短期**（3个月）：接入更多AI模型，支持支付订阅。  
   * **中期**（6个月）：增加视频生成、图片编辑功能。  
   * **长期**（1年）：移动端 APP、API 服务商业化。  
2. **商业模式**  
   * **免费层**：每日 3 次生成（日成本 ~$0.117）。  
   * **基础版**：$9.99/月，每日 50 次（成本 $1.95，毛利率 80%）。  
   * **专业版**：$19.99/月，每日 200 次 \+ 高级功能（成本 $7.8，毛利率 61%）。  
   * **企业版**：自定义定价，API 接入。  
   * **支付方式**：Stripe、PayPal、微信支付、支付宝。  
3. **监控指标**  
   * DAU/MAU 活跃用户  
   * 图片生成成功率 (目标 \>95%)  
   * API 响应时间  
   * 用户转化率 (免费→付费)  
   * 月度收入 (MRR)  
   * 举报响应时间

---

## **八、风险评估与应对**

1. **技术风险**  
   * **风险**：AI模型（如Gemini）API的稳定性、性能或配额限制。  
   * **应对**：长期规划中考虑引入备用模型，实现多模型 fallback 机制。  
   * **风险**：对第三方免费服务资源的强依赖是项目初期的最大单点故障风险。  
   * **应对**：严格执行监控、告警和降级预案；积极引导高频用户向付费套餐转化以覆盖成本。  
   * **风险**：图片存储成本随用户量增长而快速增加。  
   * **应对**：执行“默认清理，收藏豁免”的图片生命周期策略。  
2. **合规风险**  
   * **风险**：AI生成内容的版权归属问题。  
   * **应对**：在用户协议中明确版权归用户所有，同时平台获得必要的使用授权。  
   * **风险**：敏感、非法内容的生成与传播。  
   * **应对**：采用“API自动过滤 \+ 关键词黑名单 \+ 用户举报 \+ 人工审核”的多重过滤机制。  
3. **商业风险**  
   * **风险**：市场竞争激烈，产品差异化不足。  
   * **应对**：专注于提示词优化、用户体验和跨模态功能（如视频生成）的创新。  
   * **风险**：用户付费意愿不强。  
   * **应对**：提供有吸引力的免费试用额度，并通过优惠券、限时折扣等方式激励转化。  
   * **风险**：上游API服务成本上涨。  
   * **应对**：动态调整订阅价格，或引入更具成本效益的AI模型。